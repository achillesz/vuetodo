module.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="http://127.0.0.1:8000/public/",o(o.s=44)}([function(t,e,o){"use strict";function n(t,e,o,n,a,r,s,i){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=d):a&&(d=i?function(){a.call(this,this.$root.$options.shadowRoot)}:a),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(t,e){return d.call(e),l(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:c}}o.d(e,"a",function(){return n})},function(t,e){t.exports=require("vue")},function(t,e){t.exports=require("vuex")},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e){t.exports=require("vue-router")},function(t,e){t.exports=require("vue-meta")},function(t,e,o){"use strict";o.r(e);var n=o(3),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){},,function(t,e,o){"use strict";o.r(e);var n=o(4),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){"use strict";o.r(e);var n=o(5),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e){t.exports={db:{appId:"A6096250029500",appKey:"CA607D6B-C309-FA1E-E7BE-119C734BB7B6"}}},function(t,e,o){function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,o){return function n(a,r){try{var s=e[a](r),i=s.value}catch(t){return void o(t)}if(!s.done)return Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)});t(i)}("next")})}}const a=o(25),r=o(26).create({baseURL:"https://d.apicloud.com/mcm/api/"}),s=t=>{let{status:e,data:o}=t,n=function(t,e){var o={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o}(t,["status","data"]);if(200===e)return o;throw((t,e)=>{const o=new Error(e.message);return o.code=t,o})(e,n)};t.exports=((t,e)=>{const o=()=>{const o=Date.now();return{"X-APICloud-AppId":t,"X-APICloud-AppKey":`${a(`${t}UZ${e}UZ${o}`)}.${o}`}};return{getAllTodos:()=>n(function*(){return s(yield r.get("/todo",{headers:o()}))})(),addTodo:t=>n(function*(){return s(yield r.post("/todo",t,{headers:o()}))})(),updateTodo:(t,e)=>n(function*(){return s(yield r.put(`/todo/${t}`,e,{headers:o()}))})(),deleteTodo:t=>n(function*(){return s(yield r.delete(`/todo/${t}`,{headers:o()}))})(),deletCompleted:t=>n(function*(){const e=t.map(function(t){return{method:"DELETE",path:`/mcm/api/todo/${t}`}});return s(yield r.post("/batch",{requests:e},{headers:o()}))})()}})},function(t,e){t.exports=require("sha1")},function(t,e){t.exports=require("axios")},function(t,e,o){"use strict";o.r(e);var n=o(6),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){"use strict";o.r(e);var n=o(7),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){"use strict";o.r(e);var n=o(8),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e){t.exports=require("timers")},function(t,e,o){"use strict";o.r(e);var n=o(9),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){"use strict";o.r(e);var n=o(10),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){"use strict";o.r(e);var n=o(11),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){"use strict";o.r(e);var n=o(12),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e.default=a.a},,function(t,e,o){},,function(t,e,o){"use strict";o.r(e);var n=o(1),a=o.n(n),r=o(13),s=o.n(r),i=o(2),d=o.n(i),c=o(14),l=o.n(c),u=o(0),f=function(t){t.options.__docs="\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#123 = 456\n"};var p=Object(u.a)({},function(){var t=this.$createElement;return(this._self._c||t)("header",{class:this.$style.mainHeader},[this._ssrNode("<h1>JTodo <span>3</span><span>6</span></h1>")])},[],!1,function(t){var e=o(15);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"3435b947");"function"==typeof f&&f(p),p.options.__file="header.vue";var v=p.exports,h=(o(17),{data:()=>({author:"Jokcy"}),render(){const t=arguments[0];return t("div",{attrs:{id:"footer"}},[t("span",["Written by ",this.author])])}});var m=Object(u.a)({},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"spinner"},[this._ssrNode('<div class="dot1" data-v-5a41b70e></div><div class="dot2" data-v-5a41b70e></div>')])},[],!1,function(t){var e=o(19);e.__inject__&&e.__inject__(t)},"5a41b70e","46ca1d8b");m.options.__file="loading.vue";var _=m.exports,g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};console.log(v.__docs);var b={metaInfo:{title:"Achilles's Todo App"},components:{Header:v,Footer:h,Loading:_},methods:{notify(){this.$notify({content:"text $notifi",btn:"close"})}},computed:g({},Object(i.mapState)(["loading"])),mounted(){}};var y=Object(u.a)(b,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._ssrNode('<div id="cover" data-v-7fff69f6></div>'),this._ssrNode('<div id="loading"'+this._ssrStyle(null,null,{display:this.loading?"":"none"})+" data-v-7fff69f6>","</div>",[e("loading")],1),e("Header"),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1),this._ssrNode("<button data-v-7fff69f6>click me</button>"),e("Footer")],2)},[],!1,function(t){var e=o(21);e.__inject__&&e.__inject__(t)},"7fff69f6","5f8301d4");y.options.__file="app.vue";var T=y.exports,x={count:0,firstName:"zhiyong",lastName:"wang",todos:[],user:null,loading:!1},$={updateCount(t,{num:e,num2:o}){t.count=e},fillTodos(t,e){t.todos=e},addTodo(t,e){t.todos.unshift(e)},updateTodo(t,{id:e,todo:o}){t.todos.splice(t.todos.findIndex(t=>t.id===e),1,o)},deleteTodo(t,e){t.todos.splice(t.todos.findIndex(t=>t.id===e),1)},deleteAllCompleted(t){t.todos=t.todos.filter(t=>!t.completed)},doLogin(t,e){t.user=e},startLoading(t){t.loading=!0},endLoading(t){t.loading=!1}},C={fullName:t=>`${t.firstName} ${t.lastName}`};const j=o(23),O=o(24)(j.db.appId,j.db.appKey);var A={getAllTodos:()=>O.getAllTodos()},w={name:"Notification",props:{content:{type:String,required:!0},btn:{type:String,default:"关闭"}},data:()=>({visible:!0}),computed:{style:()=>({})},methods:{clearTimer(){},createTimer(){},handleClose(t){t.preventDefault,this.$emit("close")},afterLeave(){this.$emit("closed")},afterEnter(){}}};var L=Object(u.a)(w,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade"},on:{"after-leave":t.afterLeave,"after-enter":t.afterEnter}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"notification",style:t.style,on:{mouseenter:t.clearTimer,mouseleave:t.createTimer}},[o("span",{staticClass:"content"},[t._v(t._s(t.content))]),o("a",{staticClass:"btn",on:{click:t.handleClose}},[t._v(t._s(t.btn))])])])},[],!1,function(t){var e=o(27);e.__inject__&&e.__inject__(t)},"290d34fe","158a4b9e");L.options.__file="notification.vue";var E=L.exports,S={extends:E,computed:{style(){return{position:"fixed",right:"20px",bottom:`${this.verticalOffset}px`}}},data:()=>({verticalOffset:0,autoClose:3e3,height:0,visible:!1}),methods:{createTimer(){this.autoClose&&(this.timer=setTimeout(()=>{this.visible=!1},this.autoClose))},clearTimer(){this.timer&&clearTimeout(this.timer)},afterEnter(){this.height=this.$el.offsetHeight}},mounted(){this.createTimer()},beforeDestory(){this.clearTime()}},P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};const N=a.a.extend(S),q=[];let k=1;var I=t=>{if(a.a.prototype.$isServer)return;const{autoClose:e}=t,o=function(t,e){var o={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o}(t,["autoClose"]),n=new N({propsData:P({},o),data:{autoClose:void 0===e?3e3:e}}),r=`notification_${k++}`;n.id=r,n.vm=n.$mount(),document.body.appendChild(n.vm.$el),n.vm.visible=!0;let s=0;return q.forEach(t=>{s+=t.$el.offsetHeight+16}),s+=16,q.push(n),n.verticalOffset=s,n.vm.$on("closed",()=>{(t=>{if(!t)return;const e=q.length,o=q.findIndex(e=>t.id===e.id);if(q.splice(o,1),e<=1)return;const n=t.vm.height;for(let t=o;t<e-1;t++)q[t].verticalOffset=parseInt(q[t].verticalOffset)-n-16})(n),document.body.removeChild(n.vm.$el),n.vm.$destroy()}),n.vm.$on("close",()=>{n.vm.visible=!1}),n.vm},D=new a.a;const M=t=>{401===t.code&&I({content:"你得先登录啊！"}),D.$emit("auth")};var R={updateCountAsync(t,e){setTimeout(()=>{t.commit("updateCount",{num:e.num})},e.time)},fetchTodos:({commit:t})=>(t("startLoading"),console.log("fetch todo call..."),A.getAllTodos().then(e=>{t("endLoading"),t("fillTodos",e)}).catch(e=>{t("endLoading"),M(e)})),addTodo({commit:t},e){t("startLoading"),A.createTodo(e).then(e=>{t("addTodo",e),t("endLoading"),I({content:"你又多了一件事要做"})}).catch(e=>{t("endLoading"),M(e)})},updateTodo({commit:t},{id:e,todo:o}){t("startLoading"),A.updateTodo(e,o).then(o=>{t("updateTodo",{id:e,todo:o}),t("endLoading")}).catch(e=>{t("endLoading"),M(e)})},deleteTodo({commit:t},e){t("startLoading"),A.deleteTodo(e).then(o=>{t("deleteTodo",e),t("endLoading"),I({content:"你又少了一件事要做"})}).catch(e=>{t("endLoading"),M(e)})},deleteAllCompleted({commit:t,state:e}){t("startLoading");const o=e.todos.filter(t=>t.completed).map(t=>t.id);A.deleteAllCompleted(o).then(e=>{t("endLoading"),t("deleteAllCompleted"),I({content:"清理一下"})}).catch(e=>{t("endLoading"),M(e)})},login:({commit:t},{username:e,password:o})=>(t("startLoading"),new Promise((n,a)=>{A.login(e,o).then(e=>{t("doLogin",e),I({content:"登录成功"}),n(),t("endLoading")}).catch(e=>{t("endLoading"),console.log(e.code,e.message),I({content:e.message}),M(e),a(e)})}))},F=(o(45),[{path:"/",redirect:"/app"},{path:"/app",props:!0,component:()=>Promise.resolve().then(o.bind(null,45)),name:"app",meta:{title:"this is app",description:"首页"}},{path:"/login",component:()=>Promise.resolve().then(o.bind(null,46))},{path:"/login/exact",component:o(46).default}]),H={props:{panes:{type:Array,required:!0}},render(){return(0,arguments[0])("div",{class:"tab-content"},[this.panes.map(t=>t.active?t.$slots.default:null)])}},U=Object(u.a)(H,void 0,void 0,!1,null,null,"b0990c74");U.options.__file="tab-container.vue";var B={name:"Tabs",components:{TabContainer:U.exports},props:{value:{type:[String,Number],required:!0}},data:()=>({panes:[]}),render(){const t=arguments[0],e=[...this.panes];return t("div",{class:"tabs"},[t("ul",{class:"tabs-header"},[this.$slots.default]),t("tab-container",{attrs:{panes:e}})])},methods:{onChange(t){this.$emit("change",t)}}};var X=Object(u.a)(B,void 0,void 0,!1,function(t){var e=o(38);e.__inject__&&e.__inject__(t)},"f2544de8","0de5c611");X.options.__file="tabs.vue";var K=X.exports,J={name:"Tab",props:{index:{required:!0,type:[Number,String]},label:{type:String,default:"tab"}},computed:{active(){return this.$parent.value===this.index}},mounted(){this.$parent.panes.push(this)},methods:{handleClick(){this.$parent.onChange(this.index)}},render(){const t=arguments[0],e=this.$slots.label||t("span",[this.label]);return t("li",{class:{tab:!0,active:this.active},on:{click:this.handleClick}},[e])}};var V=Object(u.a)(J,void 0,void 0,!1,function(t){var e=o(40);e.__inject__&&e.__inject__(t)},"cbfaef28","08968552");V.options.__file="tab.vue";var Z=V.exports;o(42);a.a.use(s.a),a.a.use(d.a),a.a.use(l.a),a.a.use(t=>{t.component(E.name,E),t.prototype.$notify=I}),a.a.use(t=>{t.component(K.name,K),t.component(Z.name,Z)});var z=()=>{const t=new s.a({routes:F,mode:"history",linkActiveClass:"active-link",linkExactActiveClass:"exact-active-link"}),e=new d.a.Store({strict:!0,state:x,mutations:$,getters:C,actions:R,modules:{a:{namespaced:!0,state:{text:1},mutations:{updateText(t,e){console.log(t),t.text=e}},getters:{textPlus:t=>t.text+1}},b:{state:{text:2}}}});return{app:new a.a({router:t,store:e,render:t=>t(T)}),router:t,store:e}};e.default=(t=>new Promise((e,o)=>{const{app:n,router:a,store:r}=z();console.log(t,"----------1"),t.user&&(r.state.user=t.user),a.push(t.url),a.onReady(()=>{console.log("----------2");const s=a.getMatchedComponents();if(!s.length)return o(new Error("no component matched"));Promise.all(s.map(t=>{if(t.asyncData)return t.asyncData({route:a.currentRoute,router:a,store:r})})).then(o=>{console.log(o,"----------3"),t.meta=n.$meta(),t.state=r.state,t.router=a,e(n)})})}))},function(t,e,o){"use strict";o.r(e);var n=o(2),a={props:{todo:{type:Object,required:!0}},methods:{deleteToDo(){this.$emit("del",this.todo.id)},handleToggle(t){console.log(t),t.preventDefault(),this.$emit("toggle",this.todo)}}},r=o(0);var s=Object(r.a)(a,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["todo-item",this.todo.completed?"completed":""]},[this._ssrNode('<input type="checkbox"'+this._ssrAttr("checked",this.todo.completed)+' class="toggle" data-v-1956ce68><label for data-v-1956ce68>'+this._ssrEscape(" "+this._s(this.todo.content))+'</label><button class="destory" data-v-1956ce68></button>')])},[],!1,function(t){var e=o(29);e.__inject__&&e.__inject__(t)},"1956ce68","505c8150");s.options.__file="item.vue";var i=s.exports,d={props:{filter:{type:String,required:!0},todos:{type:Array,required:!0}},data:()=>({states:["all","active","completed"]}),computed:{unFinishedTodoLength(){return this.todos.filter(t=>!t.completed).length}},methods:{clearAllCompleted(){this.$emit("clearAllCompleted")},toggleFilter(t){console.log(t),this.$emit("toggle",t)}}};var c=Object(r.a)(d,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"helper"},[t._ssrNode('<span class="left" data-v-1e97db6c>'+t._ssrEscape(t._s(t.unFinishedTodoLength)+" items left")+'</span><span class="tabs" data-v-1e97db6c>'+t._ssrList(t.states,function(e){return"<span"+t._ssrClass(null,[e,t.filter===e?"actived":""])+" data-v-1e97db6c>"+t._ssrEscape("\n        "+t._s(e)+"\n        ")+"</span>"})+'</span><span class="clear" data-v-1e97db6c>clear all completed</span>')])},[],!1,function(t){var e=o(31);e.__inject__&&e.__inject__(t)},"1e97db6c","4b5ac9aa");c.options.__file="helper.vue";var l=c.exports,u=(o(33),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}),f={metaInfo:{title:"The Todo App"},props:["id"],mounted(){console.log("mounted"),this.todos&&this.todos.length<1&&this.fetchTodos()},asyncData:({store:t,router:e})=>t.state.user?t.dispatch("fetchTodos"):(e.replace("/login"),Promise.resolve()),data:()=>({filter:"all",stats:["all","active","completed"]}),computed:u({},Object(n.mapState)(["todos"]),{filteredTodos(){if("all"===this.filter)return this.todos;const t="completed"===this.filter;return this.todos.filter(e=>t===e.completed)}}),methods:u({},Object(n.mapActions)(["fetchTodos","addTodo","deleteTodo","updateTodo","deleteAllCompleted"]),{toggleTodoState(t){this.updateTodo({id:t.id,todo:Object.assign({},t,{completed:!t.completed})})},clearAllCompleted(){this.deleteAllCompleted()},handleAdd(t){const e=t.target.value.trim();if(!e)return void this.$notify({content:"必须输入要做的内容"});const o={content:e,completed:!1};this.addTodo(o),t.target.value=""},handleChangeTab(t){this.filter=t}}),components:{Item:i,Helper:l}};var p=Object(r.a)(f,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"real-app"},[t._ssrNode('<div class="tab-container" data-v-14adb30b>',"</div>",[o("tabs",{attrs:{value:t.filter},on:{change:t.handleChangeTab}},t._l(t.stats,function(t){return o("tab",{key:t,attrs:{index:t,label:t}})}))],1),t._ssrNode('<input type="text" autofocus="autofocus" placeholder="接下去要做什么？" class="add-input" data-v-14adb30b>'),t._l(t.filteredTodos,function(e){return o("item",{key:e.id,attrs:{todo:e},on:{del:t.deleteTodo,toggle:t.toggleTodoState}})}),o("helper",{attrs:{todos:t.todos,filter:t.filter},on:{clearAllCompleted:t.clearAllCompleted}}),o("router-view")],2)},[],!1,function(t){var e=o(34);e.__inject__&&e.__inject__(t)},"14adb30b","861cc5fa");p.options.__file="todo.vue";e.default=p.exports},function(t,e,o){"use strict";o.r(e);var n=o(2),a={metaInfo:{title:"Login Page"},data:()=>({username:"",password:"",errorMsg:""}),methods:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t})({},Object(n.mapActions)(["login"]),{doSubmit(t){t.preventDefault(),this.validate()&&this.login({username:this.username,password:this.password}).then(()=>{this.$router.replace("/app")})},validate(){return this.username.trim()?this.password.trim()?(this.errorMsg="",!0):(this.errorMsg="密码不能为空",!1):(this.errorMsg="姓名不能为空",!1)}})},r=o(0);var s=Object(r.a)(a,function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{staticClass:"login-form",attrs:{autocomplete:"off"},on:{submit:t.doSubmit}},[t._ssrNode('<h1 data-v-62a3121a><span data-v-62a3121a>Login</span><span class="error-msg"'+t._ssrStyle(null,null,{display:t.errorMsg?"":"none"})+" data-v-62a3121a>"+t._ssrEscape(t._s(t.errorMsg))+'</span></h1><input type="text" placeholder="User Name"'+t._ssrAttr("value",t.username)+' class="login-input" data-v-62a3121a><input type="password" placeholder="Password" autocomplete="off"'+t._ssrAttr("value",t.password)+' class="login-input" data-v-62a3121a><button type="submit" class="login-btn" data-v-62a3121a>登 录</button>')])},[],!1,function(t){var e=o(36);e.__inject__&&e.__inject__(t)},"62a3121a","58c9c8d7");s.options.__file="login.vue";e.default=s.exports}]);
//# sourceMappingURL=server-entry.js.map